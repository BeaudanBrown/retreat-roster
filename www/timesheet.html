{{ define "timesheet" }}
{{ $staffMember := .StaffMember }}
{{ $startDate := .StartDate }}
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <base href="/">
    <title>Retreat Roster</title>
    <link rel="stylesheet" href="app.css">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/json-enc.js"></script>
  </head>
  <body class="timesheetBody">
    <div id="timesheet" class="timesheet">
      <div>
        <button hx-post='/shiftTimesheetWindow' hx-ext='json-enc' hx-vals='js:{"action":"-"}' hx-swap='outerHTML' hx-target='#timesheet'>-</button>
        <button hx-post='/shiftTimesheetWindow' hx-ext='json-enc' hx-vals='js:{"action":"0"}' hx-swap='outerHTML' hx-target='#timesheet'>This Week</button>
        <button hx-post='/shiftTimesheetWindow' hx-ext='json-enc' hx-vals='js:{"action":"+"}' hx-swap='outerHTML' hx-target='#timesheet'>+</button>
      </div>
      <div class="week-form">
        <div class="timesheetDay day-header">
          <div>Shift Start</div>
          <div>Break Start</div>
          <div>Break Stop</div>
          <div>Shift Stop</div>
          <div>Break</div>
          <div>Total</div>
          <div>Managing</div>
          <div>Admin</div>
          <div>Delete</div>
        </div>
        {{ range .Days }}
          {{ $dayName := .DayName }}
          <div>
            <h2>{{$dayName}}</h2>
            <button hx-post='/addTimesheetEntry' hx-ext='json-enc' hx-vals='js:{"staffID":"{{ $staffMember.ID }}", "dayID":"{{.ID}}", "start-date":"{{$startDate}}"}' hx-swap='outerHTML' hx-target='#timesheet'>+</button>
          </div>
          {{ range .Entries }}
            <div class="timesheetDay" id="{{$dayName}}">
              <div><input type="time" name="start1_tuesday" value="{{.ShiftStart}}"></div>
              <div><input type="time" name="stop1_tuesday" value="{{.ShiftEnd}}"></div>
              <div><input type="time" name="start2_tuesday" value="{{.BreakStart}}"></div>
              <div><input type="time" name="stop2_tuesday" value="{{.BreakEnd}}"></div>
              <div class="break">Break</div>
              <div class="total">Total</div>
              <div><input type="checkbox" name="managing_tuesday" id="managing_tuesday"{{ if .Managing }}checked{{ end }}></div>
              <div><input type="checkbox" name="admin_tuesday" id="admin_tuesday"{{ if .Admin }}checked{{ end }}></div>
              <div><a href="#" hx-ext="json-enc" hx-post="/deleteTimesheetEntry" hx-vals='js:{"entryID":"{{ .ID }}", "staffID":"{{$staffMember.ID}}", "start-date":"{{$startDate}}"}' hx-swap="outerHTML" hx-target="#timesheet">ðŸ—‘</a></div>
            </div>
          {{ end }}
        {{ end }}
      </div>
    </div>
  </body>
</html>
{{ end }}

