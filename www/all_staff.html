{{ define "allStaff" }}
<h2 class="text-white">All Staff</h2>
<div class="w-full relative overflow-x-auto shadow-md sm:rounded-lg">
	<table class="w-full text-sm text-center text-gray-400">
		<thead class="text-xs uppercase bg-gray-700 text-gray-400">
			<tr>
				<th>Name</th>
				<th>Email</th>
				<th>Phone #</th>
				<th>Contact Name</th>
				<th>Contact Phone #</th>
				<th>Current Shifts</th>
				<th>Ideal Shifts</th>
				<th>Hidden</th>
				<th>Role</th>
				<th>Edit</th>
				<th>Kitchen</th>
				<th>Delete</th>
			</tr>
		</thead>
		<tbody>
			{{ range .Staff }}
			{{if not .IsTrial }}
			<tr class="odd:bg-gray-900 even:bg-gray-800 border-gray-700">
				{{if not (eq .NickName "") }}
				<td>{{ .NickName }}</td>
				{{else}}
				<td>{{ .FirstName }}</td>
				{{end}}
				<td>{{ .Email }}</td>
				<td>{{ .Phone }}</td>
				<td>{{ .ContactName }}</td>
				<td>{{ .ContactPhone }}</td>
				<td>{{ index $.StaffShiftCount .ID }}</td>
				<td>{{ .IdealShifts }}</td>
				<td>
					<input type="checkbox" {{ if .IsHidden }}checked{{ end }}
						hx-ext="json-enc"
						hx-post="/toggleHidden"
						hx-target="#roster"
						hx-trigger="change"
						hx-vals='{"id": "{{ .ID }}"}'
						hx-swap='outerHTML'>
				</td>
				<td>
					{{ if $.ActiveStaff.IsAdminRole }}
					<select class="w-full p-1 text-sm rounded bg-gray-700 border-gray-600 text-white"
						hx-ext="json-enc"
						hx-post="/setRole"
						hx-trigger="change"
						hx-vals='js:{"id":"{{ .ID }}", "role": parseInt(event.target.value)}'
						hx-target="#roster" hx-swap='outerHTML'>
						<option value="0" {{ if eq .Role 0 }}selected{{ end }}>Staff</option>
						<option value="1" {{ if eq .Role 1 }}selected{{ end }}>Manager</option>
						<option value="2" {{ if eq .Role 2 }}selected{{ end }}>Admin</option>
					</select>
					{{ else }}
					<label>{{ .RoleLabel }}</label>
					{{ end }}
				</td>

				<td>
					<a href="/profile?editStaffId={{ .ID }}">✏️</a>
				</td>
				<td>
					<input type="checkbox" {{ if .IsKitchen }}checked{{ end }}
						hx-ext="json-enc"
						hx-post="/toggleKitchen"
						hx-target="#roster"
						hx-trigger="change"
						hx-vals='{"id": "{{ .ID }}"}'
						hx-swap='outerHTML'>
				</td>
				<td>
					{{ if $.ActiveStaff.IsAdminRole }}
					<button type="button"
						class="buttonStyle w-full"
						hx-ext="json-enc"
						hx-post="/deleteAcc"
						hx-vals='js:{"id":"{{ .ID }}"}'
						hx-swap="outerHTML"
						hx-confirm="Are you sure you want to delete this staff member?"
						hx-target="#roster">
						Delete
					</button>
					{{ end }}
				</td>
			</tr>
			{{end}}
			{{ end }}
		</tbody>
	</table>
</div>
{{ end }}
